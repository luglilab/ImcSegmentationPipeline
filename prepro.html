
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
      <link rel="icon" href="assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-7.0.6">
    
    
      
        <title>Pre-processing - IMC Segmentation Pipeline</title>
      
    
    
      <link rel="stylesheet" href="assets/stylesheets/main.2c0c5eaf.min.css">
      
        
        <link rel="stylesheet" href="assets/stylesheets/palette.7fa14f5b.min.css">
        
          
          
          <meta name="theme-color" content="#009485">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style>
      
    
    
    
    
      
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="teal" data-md-color-accent="teal">
      
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#pre-processing" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="." title="IMC Segmentation Pipeline" class="md-header__button md-logo" aria-label="IMC Segmentation Pipeline" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            IMC Segmentation Pipeline
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Pre-processing
            
          </span>
        </div>
      </div>
    </div>
    <div class="md-header__options">
      
    </div>
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        
<a href="https://github.com/BodenmillerGroup/ImcSegmentationPipeline/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    BodenmillerGroup/ImcSegmentationPipeline
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="." title="IMC Segmentation Pipeline" class="md-nav__button md-logo" aria-label="IMC Segmentation Pipeline" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    IMC Segmentation Pipeline
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/BodenmillerGroup/ImcSegmentationPipeline/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    BodenmillerGroup/ImcSegmentationPipeline
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="index.html" class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="intro.html" class="md-nav__link">
        Introduction
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Pre-processing
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="prepro.html" class="md-nav__link md-nav__link--active">
        Pre-processing
      </a>
      
        
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#input" class="md-nav__link">
    Input
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conversion-fom-mcd-to-ometiff-files" class="md-nav__link">
    Conversion fom .mcd to .ome.tiff files
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conversion-from-ometiff-to-single-channel-tiffs" class="md-nav__link">
    Conversion from .ome.tiff to single-channel tiffs
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conversion-from-ometiff-to-multi-channel-tiffs" class="md-nav__link">
    Conversion from .ome.tiff to multi-channel tiffs
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#export-of-acquisition-specific-metadata" class="md-nav__link">
    Export of acquisition-specific metadata
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#output" class="md-nav__link">
    Output
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="ilastik.html" class="md-nav__link">
        Ilastik training
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="cellprofiler.html" class="md-nav__link">
        CellProfiler analysis
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="output.html" class="md-nav__link">
        Output files
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#input" class="md-nav__link">
    Input
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conversion-fom-mcd-to-ometiff-files" class="md-nav__link">
    Conversion fom .mcd to .ome.tiff files
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conversion-from-ometiff-to-single-channel-tiffs" class="md-nav__link">
    Conversion from .ome.tiff to single-channel tiffs
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conversion-from-ometiff-to-multi-channel-tiffs" class="md-nav__link">
    Conversion from .ome.tiff to multi-channel tiffs
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#export-of-acquisition-specific-metadata" class="md-nav__link">
    Export of acquisition-specific metadata
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#output" class="md-nav__link">
    Output
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/BodenmillerGroup/ImcSegmentationPipeline/edit/master/docs/prepro.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                <h1 id="pre-processing">Pre-processing</h1>
<p><img alt="prepro" src="img/prepro.png" />
<em>Conversion from raw .mcd files to .ome.tiff and .tiff files suitable for downstream analysis</em></p>
<p>During the first step of the segmentation pipeline, raw imaging files need to be converted to file formats that can be read-in by external software (Fiji, R, python, histoCAT).</p>
<p><strong>Please follow the <a href="https://github.com/BodenmillerGroup/ImcSegmentationPipeline/blob/main/preprocessing.ipynb">preprocessing.ipynb</a> script to pre-process the raw data</strong>
To get started, please refer to the instructions <a href="index.html">here</a>.</p>
<h2 id="input">Input</h2>
<p><strong>The zipped .mcd files</strong></p>
<p>The Hyperion Imaging System produces vendor controlled <code>.mcd</code> and <code>.txt</code> files in the following folder structure:</p>
<pre><code>.
+-- XYZ_ROI_001_1.txt
+-- XYZ_ROI_002_2.txt
+-- XYZ_ROI_003_3.txt
+-- XYZ.mcd
</code></pre>
<p>where <code>XYZ</code> defines the filename and <code>ROI_001</code>, <code>ROI_002</code>, <code>ROI_003</code> are names for the selected regions of interest (ROI). 
These can be sepcified in the Fluidigm software when selecting ROIs.
The <code>.mcd</code> file contains the raw imaging data of all acquired ROIs while each <code>.txt</code> file contains data of a single ROI.
To enforce a consistent naming scheme and to bundle all metadata, <strong>we recommend to zip the folder</strong> and specify the location of all <code>.zip</code> files for preprocessing.</p>
<p><strong>The panel file</strong></p>
<p>The panel file (in <code>.csv</code> format) specifies the type of antibodies that were used in the experiment and all additional channels (e.g. metals used for counterstaining<sup id="fnref:fn1"><a class="footnote-ref" href="#fn:fn1">1</a></sup>) that you want to include in downstream processing.
Example entries to the panel file can look like this:</p>
<table>
<thead>
<tr>
<th align="left">Metal Tag</th>
<th align="left">Target</th>
<th align="left">full</th>
<th align="left">ilastik</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">Dy161</td>
<td align="left">Ecad</td>
<td align="left">1</td>
<td align="left">1</td>
</tr>
<tr>
<td align="left">Dy162</td>
<td align="left">CD45</td>
<td align="left">1</td>
<td align="left">0</td>
</tr>
<tr>
<td align="left">Er166</td>
<td align="left">CD3</td>
<td align="left">1</td>
<td align="left">1</td>
</tr>
<tr>
<td align="left">Ru100</td>
<td align="left">Counterstain</td>
<td align="left">1</td>
<td align="left">0</td>
</tr>
</tbody>
</table>
<p>Usually there are more columns but the important ones in this case are <code>Metal Tag</code>, <code>full</code> and <code>ilastik</code>.
The <code>1</code> in the <code>full</code> column specifies channels that should be written out to an image stack that will be later on used to extract features. 
Here, please specify all channels as <code>1</code> that you want to have included in the analysis.
The <code>1</code> in the <code>ilastik</code> column indicates channels that will be used for Ilastik pixel classification therefore being used for image segmentation.
During the pre-processing steps, you will need to specify the name of the panel column that contains the metal isotopes, the name of the column that contains the <code>1</code> or <code>0</code> entries for the channels to be analysed and the name of the column that indicates the channels used for Ilastik training as seen above.</p>
<p><strong>Naming conventions</strong></p>
<p>When going through the <a href="https://github.com/BodenmillerGroup/ImcSegmentationPipeline/blob/main/preprocessing.ipynb">preprocessing script</a>, you will notice the  The pipeline relies on <code>_ilastik</code> as ilastik suffix. </p>
<h2 id="conversion-fom-mcd-to-ometiff-files">Conversion fom .mcd to .ome.tiff files</h2>
<p>In the first step of the segmentation pipeline, raw <code>.mcd</code> files are converted into an <code>.ome.tiff</code> format <sup id="fnref:fn2"><a class="footnote-ref" href="#fn:fn2">2</a></sup>.
This serves the purpose to allow vendor independent downstream analysis and visualization of the images.
For in-depth information of the <code>.ome.tiff</code> file format see <a href="https://www.openmicroscopy.org/Schemas/Documentation/Generated/OME-2016-06/ome.html">here</a>. 
Each <code>.mcd</code> file can contain multiple acquisitions. This means that multiple multi-channel <code>.ome.tiff</code> files per <code>.mcd</code> file are produced. 
The <code>Fluor</code> and <code>Name</code> of each channel is set.
Here <code>Name</code> contains the actual name of the antibody as defined in the panel file and <code>Fluor</code> contains the metal tag of the antibody.
For IMC data, the metal tag is defined as: <code>(IsotopeShortname)(Mass)</code>, e.g. Ir191 for Iridium
isotope 191.</p>
<p>To perform this conversion, we use the <a href="https://bodenmillergroup.github.io/imctools/converters/mcdfolder2imcfolder.html#imctools.converters.mcdfolder2imcfolder.mcdfolder_to_imcfolder">mcdfolder_to_imcfolder</a> converter function of the <a href="https://bodenmillergroup.github.io/imctools/">imctools</a> package.
It uses the <a href="https://github.com/BodenmillerGroup/xtiff">xtiff</a> python package to write the <code>.ome.tiff</code> files.</p>
<p>The output folder for each sample has the following form:</p>
<pre><code>.
+-- XYZ_s0_ac1_ac.ome.tiff
+-- XYZ_s0_ac1_ac.ome.tiff
+-- XYZ_s0_ac1_ac.ome.tiff
+-- XYZ_s0_p1_pano.png
+-- XYZ_s0_slide.png
+-- XYZ_schema.xml
+-- XYZ_session.json
</code></pre>
<p><strong>TODO: Explain what these files and what the nameing is</strong>
Link to wiki of <code>imctools</code>.</p>
<h2 id="conversion-from-ometiff-to-single-channel-tiffs">Conversion from .ome.tiff to single-channel tiffs</h2>
<p>We also export the images in a format that is supported by the <a href="https://bodenmillergroup.github.io/histoCAT/">histoCAT</a> software<sup id="fnref:fn3"><a class="footnote-ref" href="#fn:fn3">3</a></sup>.
To load images into <code>histoCAT</code>, they need to be stored as unsigned 16-bit or unsigned 32-bit single-channel <code>.tiff</code> files. 
For each acquisition (each <code>.ome.tiff</code> file), the <a href="https://bodenmillergroup.github.io/imctools/converters/ome2histocat.html">ome2histocat</a> converter exports one folder containing all measured channels as single-channel <code>.tiff</code> files.
The naming convention of these <code>.tiff</code> files is <code>Name_Fluor</code>, where <code>Name</code> is the name of the antibody (or the metal if no name is available) and <code>Fluor</code> is the name of the metal isotope.
For full documentation on the histoCAT format, please follow <a href="https://github.com/BodenmillerGroup/histoCAT/releases/download/histoCAT_1.76/histoCATmanual_1.76.pdf">the manual</a>.</p>
<h2 id="conversion-from-ometiff-to-multi-channel-tiffs">Conversion from .ome.tiff to multi-channel tiffs</h2>
<p>2.4 Generation of the analysis stacks
In the next step the converted .ome.tiff files are converted in a stack format suitable for further
analysis, e.g. using CellProler. In a basic pipeline two stacks will be prepared: a 'Full' stack,
containing all the channels chosen for CellProfiler quantification as well as the 'Ilastik' stack,
containing all the channels selected for the Ilastik pixel classification. It is straight forward to
modify this step to generate additional stacks, e.g. for additional tissue structure segmentations.</p>
<h2 id="export-of-acquisition-specific-metadata">Export of acquisition-specific metadata</h2>
<h2 id="output">Output</h2>
<p>Summarize output</p>
<div class="footnote">
<hr />
<ol>
<li id="fn:fn1">
<p>Catena R. <em>et al.</em> (2018) Ruthenium counterstaining for imaging mass cytometry. The Journal of Pathology 244(4), pages 479-484.&#160;<a class="footnote-backref" href="#fnref:fn1" title="Jump back to footnote 1 in the text">&#8617;</a></p>
</li>
<li id="fn:fn2">
<p>Goldberg I.G. <em>et al.</em> (2005) The open microscopy environment (OME) data model and XML file: open tools for informatics and quantitative analysis in biological imaging. Genome Biology 6(5), R47.&#160;<a class="footnote-backref" href="#fnref:fn2" title="Jump back to footnote 2 in the text">&#8617;</a></p>
</li>
<li id="fn:fn3">
<p>Shapiro D. <em>et al.</em> (2017) histoCAT: analysis of cell phenotypes and interactions in multiplex image cytometry data. Nature Methods 14, pages 873â€“876.&#160;<a class="footnote-backref" href="#fnref:fn3" title="Jump back to footnote 3 in the text">&#8617;</a></p>
</li>
</ol>
</div>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        <a href="intro.html" class="md-footer__link md-footer__link--prev" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Introduction
            </div>
          </div>
        </a>
      
      
        <a href="ilastik.html" class="md-footer__link md-footer__link--next" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Ilastik training
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
        
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": ".", "features": [], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing"}, "search": "assets/javascripts/workers/search.fb4a9340.min.js", "version": null}</script>
    
    
      <script src="assets/javascripts/bundle.a1c7c35e.min.js"></script>
      
    
  </body>
</html>